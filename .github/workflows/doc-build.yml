name: DOC-build

on:
  push:
    branches: [ "master" ]
  pull_request:
    branches: [ "master" ]
  
  workflow_dispatch:
  
env:
  PROJECT: DocFlow 

defaults:
    run:
      working-directory: ./doc

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
      - name: Получение последней версии
        uses: actions/checkout@v3
      
      - name: Скопировать файл arc-template.md с новым именем PROJECT-ARC.md, где PROJECT - реальное имя проекта.
        uses: canastro/copy-file-action@master
        with:
          source: "arc-template.md"
          target: "{$PROJECT}-arc.md"
      
      # - name: Заменить плейсхолдеры в PROJECT-ARC.md на содержимое разделов из папки doc.

      # - name: Создать PROJ-ARC.pdf на основе .md
      
      - name: Коммит созданных файлов.
        run: |
          git add {$PROJECT}-arc.md
          git commit -m "Architecture Specification created."
          git push origin master
